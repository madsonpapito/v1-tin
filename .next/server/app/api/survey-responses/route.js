(()=>{var e={};e.id=367,e.ids=[367],e.modules={834:(e,r,s)=>{"use strict";s.r(r),s.d(r,{patchFetch:()=>S,routeModule:()=>x,serverHooks:()=>j,workAsyncStorage:()=>m,workUnitAsyncStorage:()=>h});var t={};s.r(t),s.d(t,{GET:()=>f,POST:()=>v});var n=s(6559),o=s(8088),a=s(7719),i=s(2190);let u=require("fs");var p=s.n(u),c=s(3873),l=s.n(c);let d=l().join(process.cwd(),"data","survey-responses.json");function y(){let e=l().dirname(d);p().existsSync(e)||p().mkdirSync(e,{recursive:!0}),p().existsSync(d)||p().writeFileSync(d,JSON.stringify({responses:[],summary:{}},null,2))}function g(){return y(),JSON.parse(p().readFileSync(d,"utf-8"))}async function v(e){try{let{gender:r,ageRange:s,relationshipStatus:t,suspicionLevel:n,redFlags:o}=await e.json(),a=g(),u={id:Date.now(),timestamp:new Date().toISOString(),gender:r,ageRange:s,relationshipStatus:t,suspicionLevel:n,redFlags:o};return a.responses.push(u),a.summary=function(e){let r=e.length;if(0===r)return{};let s={totalResponses:r};for(let t of["gender","ageRange","relationshipStatus","suspicionLevel"]){let n={};for(let r of e){let e=r[t];e&&(n[e]=(n[e]||0)+1)}s[t]=Object.entries(n).map(([e,s])=>({value:e,count:s,percentage:Math.round(s/r*100)})).sort((e,r)=>r.count-e.count)}let t={};for(let r of e)if(r.redFlags&&Array.isArray(r.redFlags))for(let e of r.redFlags)t[e]=(t[e]||0)+1;return s.redFlags=Object.entries(t).map(([e,s])=>({value:e,count:s,percentage:Math.round(s/r*100)})).sort((e,r)=>r.count-e.count),s}(a.responses),y(),p().writeFileSync(d,JSON.stringify(a,null,2)),i.NextResponse.json({success:!0,totalResponses:a.responses.length})}catch(e){return console.error("Error saving survey response:",e),i.NextResponse.json({error:"Failed to save response"},{status:500})}}async function f(){try{let e=g();return i.NextResponse.json(e.summary)}catch(e){return console.error("Error reading survey data:",e),i.NextResponse.json({error:"Failed to load data"},{status:500})}}let x=new n.AppRouteRouteModule({definition:{kind:o.RouteKind.APP_ROUTE,page:"/api/survey-responses/route",pathname:"/api/survey-responses",filename:"route",bundlePath:"app/api/survey-responses/route"},resolvedPagePath:"C:\\Users\\madso\\v1- tinder\\app\\api\\survey-responses\\route.ts",nextConfigOutput:"",userland:t}),{workAsyncStorage:m,workUnitAsyncStorage:h,serverHooks:j}=x;function S(){return(0,a.patchFetch)({workAsyncStorage:m,workUnitAsyncStorage:h})}},846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},3033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},3873:e=>{"use strict";e.exports=require("path")},4870:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},6487:()=>{},8335:()=>{},9294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")}};var r=require("../../../webpack-runtime.js");r.C(e);var s=e=>r(r.s=e),t=r.X(0,[447,580],()=>s(834));module.exports=t})();